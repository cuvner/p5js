
# Flow Field Particle Simulation

This project guides a young coder through creating a flow field particle simulation using **p5.js**. The student will learn how particles follow a flow field generated by Perlin noise.

## Step-by-Step Instructions

### Step 1: Set Up the Canvas and Variables

We'll start by setting up our canvas and preparing some important variables.

- `let inc = 0.1;` controls the detail of the noise in our flow field.
- `let scl = 10;` defines the scale of the grid.
- `let cols, rows;` are the number of columns and rows in the grid.
- `let zoff = 0;` helps create a 3D noise effect, making the flow change over time.
- `let particles = [];` is an array where we'll store the particles.
- `let flowfield;` is where we store all the flow vectors.

```js
let inc = 0.1;
let scl = 10;
let cols, rows;
let zoff = 0;
let particles = [];
let flowfield;
```

### Step 2: Creating the Canvas and Grid

In the `setup()` function:
- Create the canvas.
- Set up the color mode to HSB.
- Calculate the number of columns and rows by dividing the width and height of the canvas by the scale (`scl`).
- Create the flowfield array, which will hold the direction of flow for each point on the grid.

```js
function setup() {
  createCanvas(800, 600);
  colorMode(HSB, 360);
  cols = floor(width / scl);
  rows = floor(height / scl);
  
  flowfield = new Array(cols * rows);

  for (let i = 0; i < 2500; i++) {
    particles[i] = new Particle();
  }
  background(0, 0, 0);
}
```

- **Explanation**: 
  We’re setting up an 800x600 pixel canvas, calculating how many grid cells we’ll have, and making 2500 particles.

### Step 3: Building the Flow Field

In the `draw()` function:
- Use Perlin noise (`noise()`) to generate a smoothly varying random field.
- For each grid point, calculate an angle based on the noise and create a vector pointing in that direction.

```js
function draw() {
  let yoff = 0;
  for (let y = 0; y < rows; y++) {
    let xoff = 0;
    for (let x = 0; x < cols; x++) {
      let index = x + y * cols;
      let angle = noise(xoff, yoff, zoff) * TWO_PI * 4;
      let v = p5.Vector.fromAngle(angle);
      v.setMag(1);
      flowfield[index] = v;
      xoff += inc;
    }
    yoff += inc;
    zoff += 0.0003;
  }
```

- **Explanation**: 
  We use `noise()` to create smooth flow that looks natural. The `zoff` makes the noise evolve over time, causing movement in the flow field.

### Step 4: Moving the Particles

Each particle follows the flow field by:
- Checking its current position and following the flow direction at that point.
- Updating its position and keeping it within the canvas.
- Displaying itself on the screen.

```js
  for (let i = 0; i < particles.length; i++) {
    particles[i].follow(flowfield);
    particles[i].update();
    particles[i].edges();
    particles[i].show();
  }
}
```

- **Explanation**: 
  The particles move based on the flow field vectors, leaving trails and creating flowing patterns.

### What You've Learned
- How to create a canvas in p5.js.
- How to use Perlin noise to generate smooth motion.
- How particles can follow a flow field based on random vectors.
  
### Running the Project
1. Clone the repository:
    ```bash
    git clone https://github.com/your-username/flow-field-particles.git
    ```
2. Open the `index.html` file in a browser to run the simulation.

## Future Exploration
- Try changing the number of particles or the scale to see how it affects the flow.
- Add more colors to the particles or make them change colors based on their speed.

## License
This project is open source and available under the [MIT License](LICENSE).

